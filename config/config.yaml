# Circle Inspector (Stable Tuned) - Configuration File
# Adjusted to match circle_inspector_tuned.py parameters

# =============================================================================
# Camera Settings
# =============================================================================
camera_id: 0                    # Camera device ID (0 = default camera)
frame_width: 1280              # Frame width in pixels
frame_height: 720              # Frame height in pixels

# =============================================================================
# Circle Detection Parameters
# =============================================================================
# Size constraints
min_radius: 28                 # Minimum circle radius in pixels (tolerant low end)
max_radius: 110                # Maximum circle radius in pixels (tolerant high end)

# =============================================================================
# Edge Detection & Morphology Parameters
# =============================================================================
# Canny edge detection thresholds
canny_low: 40                  # Lower threshold for Canny edge detector
canny_high: 120                # Upper threshold for Canny edge detector

# Morphology operations
dilate_iter: 2                 # Dilation iterations (helps connect faint edges)
erode_iter: 0                  # Erosion iterations
close_iter: 1                  # Morphology close iterations (bridge micro-gaps)

# =============================================================================
# Classification Thresholds
# =============================================================================
# Perimeter ratio (arcLength/(2Ï€r))
per_ratio_min_good: 0.72       # Minimum for GOOD circles (smooth/mostly-complete)
per_ratio_bad: 0.50            # Below this = BAD (dashed/broken)

# Axis ratio (major/minor ellipse axes)
axis_ratio_max: 1.15           # Above this = BAD (ellipse reject)

# Standard deviation normalized (std(distance_to_center)/r)
std_norm_good: 0.08            # Below this = GOOD (smooth edge)
std_norm_bad: 0.14             # Above this = BAD (jagged)

# =============================================================================
# Paper Gating Settings
# =============================================================================
paper_only: true               # Ignore dark/non-paper interiors (hands/phones)
paper_v_min: 120               # HSV V brightness inside circle (lower = more tolerant)

# =============================================================================
# Output Settings
# =============================================================================
output_dir: "output"           # Directory for saved images

# =============================================================================
# Example Configurations for Different Scenarios
# =============================================================================

# For small circles (e.g., coins):
# min_radius: 20
# max_radius: 100

# For large circles (e.g., plates):
# min_radius: 100
# max_radius: 500

# For strict quality control:
# per_ratio_min_good: 0.85
# per_ratio_bad: 0.60
# axis_ratio_max: 1.10
# std_norm_good: 0.05
# std_norm_bad: 0.10

# For lenient detection:
# per_ratio_min_good: 0.65
# per_ratio_bad: 0.40
# axis_ratio_max: 1.25
# std_norm_good: 0.12
# std_norm_bad: 0.18